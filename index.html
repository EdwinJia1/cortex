<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cortex: AI Parameter Lab | Interactive Learning Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Level Select Screen (Default visible) -->
    <div id="level-select-screen" class="level-select-screen">
        <header class="level-select-header">
            <h1 class="main-title">🧠 Cortex</h1>
            <div class="subtitle">AI Parameter Lab | Interactive Learning Experience</div>
            <div class="progress-info">
                <span id="progress-text">Choose your level</span>
            </div>
        </header>
        
        <div class="level-grid-container">
            <div id="level-grid" class="level-grid">
                <!-- Level cards will be dynamically generated here -->
            </div>
        </div>

        <!-- Project Description -->
        <div class="project-description">
            <div class="description-card">
                <h3 class="description-title">🚀 What is Cortex?</h3>
                <p class="description-text">
                    Cortex is an interactive AI literacy game designed for students to learn how to effectively control and collaborate with AI.
                    Through 10 progressive levels, students master prompt engineering and AI parameter control in a safe, educational environment.
                </p>
                <div class="feature-chips">
                    <span class="feature-chip">🛡️ Safe Mode Learning</span>
                    <span class="feature-chip">🎯 Parameter Control</span>
                    <span class="feature-chip">🤔 AI Explainability</span>
                    <span class="feature-chip">📚 Educational Focus</span>
                </div>
            </div>
        </div>

        <div class="level-select-footer">
            <button id="audio-toggle-btn" class="audio-toggle-btn">🔊 Sound: ON</button>
            <button id="reset-progress-btn" class="reset-btn" style="display: none;">🔄 Reset Progress</button>
        </div>
    </div>

    <!-- Game Screen (Default hidden) -->
    <div id="game-screen" class="game-screen" style="display: none;">
        <div class="game-container">
        <!-- Game header area -->
        <header class="game-header">
            <div class="title-card">
                <h1 class="game-title">🧠 Cortex</h1>
                <div class="subtitle">AI Parameter Lab | Interactive Learning Experience</div>
                <div class="level-badge" id="level-badge">Level 1</div>
            </div>
        </header>

        <!-- Level problem area -->
        <section class="problem-section">
            <div class="problem-card">
                <h2 class="problem-title">🎯 Mission Challenge</h2>
                <div class="problem-text" id="problem-text">
                    Loading level...
                </div>
                
                <!-- Example prompt chips -->
                <div class="example-hints" id="example-hints" style="display: none;">
                    <div class="hints-label">💡 Example solutions:</div>
                    <div class="hint-chips" id="hint-chips">
                        <!-- Chips will be populated dynamically -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Control panel area -->
        <section class="control-panel">
            <!-- Input Mode Toggle -->
            <div class="input-card">
                <div class="input-mode-toggle">
                    <label class="input-label">Choose Input Mode:</label>
                    <div class="toggle-buttons">
                        <button id="safe-mode-btn" class="mode-btn active">🛡️ Safe Mode</button>
                        <button id="free-mode-btn" class="mode-btn">✍️ Free Text</button>
                    </div>
                </div>
                
                <!-- Free Text Input (Original) -->
                <div id="free-text-input" class="input-mode" style="display: none;">
                    <label class="input-label">✍️ Your Magic Spell (Prompt)</label>
                    <input type="text" id="prompt-input" class="prompt-input" 
                           placeholder="Enter your creative prompt here...">
                </div>
                
                <!-- Safe Prompt Builder -->
                <div id="safe-prompt-builder" class="input-mode">
                    <label class="input-label">🎯 Build Your Safe Prompt</label>
                    <div class="prompt-builder" id="prompt-builder">
                    <div class="keyword-categories">
                        <div class="keyword-category">
                            <label class="category-label">Core Elements:</label>
                            <select id="core-elements-select" class="keyword-select">
                                <option value="">Choose core element...</option>
                            </select>
                        </div>
                        
                        <div class="keyword-category">
                            <label class="category-label">Solutions/Tools:</label>
                            <select id="solutions-tools-select" class="keyword-select">
                                <option value="">Choose solution...</option>
                            </select>
                        </div>
                        
                        <div class="keyword-category">
                            <label class="category-label">Actions/Methods:</label>
                            <select id="actions-methods-select" class="keyword-select">
                                <option value="">Choose action...</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="prompt-preview">
                        <label class="preview-label">📝 Your Safe Prompt:</label>
                        <div id="prompt-display" class="prompt-display">Choose options to build your prompt...</div>
                    </div>
                </div>
                </div>
            </div>

            <!-- Parameter control area (enabled in Phase 3) -->
            <div class="parameters-card" id="parameters-card" style="display: none;">
                <h3 class="parameters-title">🎛️ Parameter Control Panel</h3>
                
                <!-- Creativity slider -->
                <div class="slider-group">
                    <label class="slider-label">
                        🎨 Creativity Level
                        <span class="slider-value" id="creativity-value">50</span>
                    </label>
                    <div class="slider-container">
                        <input type="range" id="creativity-slider" class="parameter-slider" 
                               min="0" max="100" value="50"
                               aria-label="Creativity level percentage"
                               aria-valuenow="50"
                               aria-valuemin="0"
                               aria-valuemax="100">
                        <div class="target-indicator" id="creativity-target" style="display: none;"></div>
                    </div>
                    <div class="slider-hint">Left = safer, Right = bolder</div>
                </div>

                <!-- Style selection dropdown -->
                <div class="slider-group" id="style-selection-group" style="display: none;">
                    <label class="slider-label">
                        🎨 Art Style
                    </label>
                    <select id="style-select" class="style-select">
                        <option value="">No style</option>
                    </select>
                </div>

                <!-- Style weight slider -->
                <div class="slider-group">
                    <label class="slider-label">
                        🎭 Style Weight
                        <span class="slider-value" id="style-value">0</span>
                    </label>
                    <div class="slider-container">
                        <input type="range" id="style-slider" class="parameter-slider" 
                               min="0" max="100" value="0"
                               aria-label="Style weight percentage"
                               aria-valuenow="0"
                               aria-valuemin="0"
                               aria-valuemax="100">
                        <div class="target-indicator" id="style-target" style="display: none;"></div>
                    </div>
                    <div class="slider-hint">Current style: <span id="current-style">None</span></div>
                </div>
            </div>

            <!-- Generate button -->
            <button id="generate-btn" class="generate-btn"
                    aria-label="Generate AI image based on current prompt and parameters"
                    title="Click to generate an AI image">
                ✨ Summon AI Magic
            </button>
        </section>

        <!-- Result display area -->
        <section class="result-section">
            <div class="result-card">
                <h3 class="result-title">🖼️ AI's Creative Result</h3>
                
                <!-- Image display area -->
                <div class="image-container" id="image-container">
                    <div class="placeholder-image">
                        <span class="placeholder-text">Click "Summon AI Magic" to start creating!</span>
                    </div>
                </div>

                <!-- Player judgment area -->
                <div class="judgment-controls" id="judgment-controls" style="display: none;">
                    <h4 class="judgment-question">Did you solve the problem?</h4>
                    <p class="judgment-hint">Look at the AI-generated image and decide if it successfully addresses the challenge!</p>
                    <div class="judgment-buttons">
                        <button id="solved-button" class="judgment-btn solved-btn">
                            ✅ Problem Solved!
                        </button>
                        <button id="not-solved-button" class="judgment-btn not-solved-btn">
                            ❌ Not quite...
                        </button>
                    </div>
                </div>

                <!-- Why button -->
                <div class="explanation-controls" id="explanation-controls" style="display: none;">
                    <button id="why-button" class="why-button">
                        🤔 Why did AI create this?
                    </button>
                </div>
            </div>
        </section>

        <!-- Explanation panel -->
        <div class="explanation-panel" id="explanation-panel" style="display: none;"
             role="dialog"
             aria-modal="true"
             aria-labelledby="explanation-title">
            <div class="explanation-content">
                <h4 class="explanation-title" id="explanation-title">🧠 AI Mind Analysis</h4>
                <div class="explanation-text" id="explanation-text"></div>
                
                <!-- Real-time Parameter Visualization -->
                <div class="parameter-visualization" id="parameter-visualization">
                    <h5 class="viz-title">📊 Parameter Impact Visualization</h5>
                    <div class="parameter-bars">
                        <div class="param-bar-group">
                            <label class="param-label">Creativity Influence</label>
                            <div class="param-bar-container">
                                <div class="param-bar creativity-bar" id="creativity-impact-bar"></div>
                                <span class="param-value" id="creativity-impact-value">50%</span>
                            </div>
                        </div>
                        <div class="param-bar-group">
                            <label class="param-label">Style Influence</label>
                            <div class="param-bar-container">
                                <div class="param-bar style-bar" id="style-impact-bar"></div>
                                <span class="param-value" id="style-impact-value">0%</span>
                            </div>
                        </div>
                        <div class="param-bar-group">
                            <label class="param-label">Randomness Level</label>
                            <div class="param-bar-container">
                                <div class="param-bar randomness-bar" id="randomness-bar"></div>
                                <span class="param-value" id="randomness-value">Medium</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Parameter History Comparison -->
                    <div class="parameter-history" id="parameter-history" style="display: none;">
                        <h6 class="history-title">📈 Parameter History Comparison</h6>
                        <div class="history-controls">
                            <button class="history-btn" id="show-history-btn">Show History</button>
                            <button class="history-btn" id="clear-history-btn">Clear History</button>
                        </div>
                        <div class="history-timeline" id="history-timeline">
                            <!-- History items will be populated here -->
                        </div>
                    </div>
                </div>
                
                <button class="close-explanation" id="close-explanation">Close</button>
            </div>
        </div>

        <!-- Loading state -->
        <div class="loading-overlay" id="loading-overlay" style="display: none;">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <p class="loading-text">AI is creating...</p>
            </div>
        </div>

        <!-- Success modal -->
        <div class="success-modal" id="success-modal" style="display: none;"
             role="dialog"
             aria-modal="true"
             aria-labelledby="success-title">
            <div class="success-content">
                <h3 class="success-title" id="success-title">🎉 Congratulations!</h3>
                <p class="success-text">You have successfully mastered this skill!</p>
                <button class="next-level-btn" id="next-level-btn"
                        aria-label="Continue to next level">Next Level</button>
            </div>
        </div>
        
        <!-- Back to levels button -->
        <div class="back-button-container">
            <button id="back-to-levels-btn" class="back-to-levels-btn">
                ← Back to Level Select
            </button>
        </div>
    </div>
    </div>

    <!-- Script file links -->
    <script src="js/api.js"></script>
    <script src="js/levels.js"></script>
    <script src="js/explanation.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/app.js"></script>
</body>
</html>